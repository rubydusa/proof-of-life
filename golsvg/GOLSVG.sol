pragma solidity ^0.8.12;

import "@openzeppelin/contracts/utils/Strings.sol";

contract GOLSVG {
    uint256 constant W = 8;
    uint256 constant H = 8;

    using Strings for uint256;

    string constant SVG_A = '<svg viewBox="0 0 100 100">';
    string constant SVG_B = '</svg>';

    function svg(uint256 n, uint256 data) external pure returns (string memory) {
        return string.concat(
            SVG_A,
            grid(),
            end(data),
            text(n),
            SVG_B
        );
    }

    string constant END_A = '<animate attributename="fill"to="#111"dur="0.4s"begin="2.4s"fill="freeze"xlink:href="#';
    string constant END_B = '"/>';

    function end(uint256 data) public pure returns (string memory) {
        string memory accm = "";

        for (uint256 x = 0; x < W; x++) {
            for (uint256 y = 0; y < H; y++) {
                if ((data >> (y + x * W)) & 1 == 1) {
                    accm = string.concat(
                        accm,
                        END_A,
                        x.toString(),
                        '-',
                        y.toString(),
                        END_B
                    );
                }
            }
        }

        return accm;
    }

    string constant TEXT_A = '<text font-family="monospace"text-anchor="middle"x="50"y="100"width="100"font-size="8">#';
    string constant TEXT_B = '</text>';

    function text(uint256 n) public pure returns (string memory) {
        return string.concat(
            TEXT_A,
            n.toString(),
            TEXT_B
        );
    }

    function grid() public pure returns (string memory) {
        return '<defs><rect id="r0"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.4s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.6s"fill="freeze"/></rect><rect id="r1"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.0s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.8s"fill="freeze"/></rect><rect id="r2"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.4s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="2.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.4s"fill="freeze"/></rect><rect id="r3"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.4s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.0s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.4s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="2.0s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.2s"fill="freeze"/></rect><rect id="r4"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.0s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.2s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.8s"fill="freeze"/></rect><rect id="r5"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.4s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.8s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.4s"fill="freeze"/></rect><rect id="r6"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="2.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.4s"fill="freeze"/></rect><rect id="r7"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.4s"fill="freeze"/></rect><rect id="r8"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.4s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.4s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.0s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="2.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.4s"fill="freeze"/></rect><rect id="r9"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.0s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.8s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.0s"fill="freeze"/></rect><rect id="r10"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.2s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.4s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.0s"fill="freeze"/></rect><rect id="r11"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.0s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.4s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.0s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.8s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.2s"fill="freeze"/></rect><rect id="r12"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.0s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.4s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.0s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.2s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="2.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.4s"fill="freeze"/></rect><rect id="r13"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.0s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.0s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="2.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.4s"fill="freeze"/></rect><rect id="r14"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.4s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="1.4s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.2s"fill="freeze"/></rect><rect id="r15"width="10"height="10"fill="#fff"stroke="#111"><animate attributename="fill"to="#7232f2"dur="0.2s"begin="0.6s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="0.8s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="1.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.0s"fill="freeze"/><animate attributename="fill"to="#7232f2"dur="0.2s"begin="2.2s"fill="freeze"/><animate attributename="fill"to="#fff"dur="0.2s"begin="2.4s"fill="freeze"/></rect></defs><use id="0-0"x="10"y="10"href="#r13"/><use id="0-1"x="10"y="20"href="#r1"/><use id="0-2"x="10"y="30"href="#r12"/><use id="0-3"x="10"y="40"href="#r13"/><use id="0-4"x="10"y="50"href="#r1"/><use id="0-5"x="10"y="60"href="#r5"/><use id="0-6"x="10"y="70"href="#r14"/><use id="0-7"x="10"y="80"href="#r2"/><use id="1-0"x="20"y="10"href="#r8"/><use id="1-1"x="20"y="20"href="#r5"/><use id="1-2"x="20"y="30"href="#r14"/><use id="1-3"x="20"y="40"href="#r15"/><use id="1-4"x="20"y="50"href="#r0"/><use id="1-5"x="20"y="60"href="#r1"/><use id="1-6"x="20"y="70"href="#r15"/><use id="1-7"x="20"y="80"href="#r10"/><use id="2-0"x="30"y="10"href="#r9"/><use id="2-1"x="30"y="20"href="#r14"/><use id="2-2"x="30"y="30"href="#r1"/><use id="2-3"x="30"y="40"href="#r13"/><use id="2-4"x="30"y="50"href="#r6"/><use id="2-5"x="30"y="60"href="#r2"/><use id="2-6"x="30"y="70"href="#r4"/><use id="2-7"x="30"y="80"href="#r0"/><use id="3-0"x="40"y="10"href="#r12"/><use id="3-1"x="40"y="20"href="#r13"/><use id="3-2"x="40"y="30"href="#r10"/><use id="3-3"x="40"y="40"href="#r0"/><use id="3-4"x="40"y="50"href="#r6"/><use id="3-5"x="40"y="60"href="#r0"/><use id="3-6"x="40"y="70"href="#r0"/><use id="3-7"x="40"y="80"href="#r3"/><use id="4-0"x="50"y="10"href="#r6"/><use id="4-1"x="50"y="20"href="#r3"/><use id="4-2"x="50"y="30"href="#r6"/><use id="4-3"x="50"y="40"href="#r9"/><use id="4-4"x="50"y="50"href="#r8"/><use id="4-5"x="50"y="60"href="#r5"/><use id="4-6"x="50"y="70"href="#r3"/><use id="4-7"x="50"y="80"href="#r15"/><use id="5-0"x="60"y="10"href="#r12"/><use id="5-1"x="60"y="20"href="#r2"/><use id="5-2"x="60"y="30"href="#r0"/><use id="5-3"x="60"y="40"href="#r8"/><use id="5-4"x="60"y="50"href="#r14"/><use id="5-5"x="60"y="60"href="#r3"/><use id="5-6"x="60"y="70"href="#r8"/><use id="5-7"x="60"y="80"href="#r4"/><use id="6-0"x="70"y="10"href="#r11"/><use id="6-1"x="70"y="20"href="#r3"/><use id="6-2"x="70"y="30"href="#r4"/><use id="6-3"x="70"y="40"href="#r8"/><use id="6-4"x="70"y="50"href="#r0"/><use id="6-5"x="70"y="60"href="#r1"/><use id="6-6"x="70"y="70"href="#r1"/><use id="6-7"x="70"y="80"href="#r6"/><use id="7-0"x="80"y="10"href="#r8"/><use id="7-1"x="80"y="20"href="#r10"/><use id="7-2"x="80"y="30"href="#r11"/><use id="7-3"x="80"y="40"href="#r1"/><use id="7-4"x="80"y="50"href="#r15"/><use id="7-5"x="80"y="60"href="#r14"/><use id="7-6"x="80"y="70"href="#r13"/><use id="7-7"x="80"y="80"href="#r11"/>';
    }
}
